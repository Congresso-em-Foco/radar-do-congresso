<div class="container">
  <h2>Assiduidade na Câmara dos Deputados</h2>
  <div class="mb-4">
    <button
      type="button"
      [ngClass]="{'btn': true, 'btn-primary': ano == '2020', 'btn-light': ano != '2020'}"
      (click)="setAno('2020')"
    >
      2020
    </button>
    &nbsp;
    <button
      type="button"
      [ngClass]="{'btn': true, 'btn-primary': ano == '2019', 'btn-light': ano != '2019'}"
      (click)="setAno('2019')"
    >
      2019
    </button>
  </div>

  <pagination-template
    #pag="paginationApi"
    maxSize="5"
    (pageChange)="pageChange($event)"
  >
    <nav
      aria-label="Paginação"
      class="pb-1"
    >
      <ul class="pagination justify-content-center">
        <li class="page-item">
          <button
            type="button"
            class="page-link"
            [disabled]="pag.isFirstPage()"
            (click)="pag.previous()"
          >
            <span class="icon-chevron-left"></span>
          </button>
        </li>
        <li
          class="page-item"
          *ngFor="let page of pag.pages"
          [class.active]="pag.getCurrent() === page.value"
        >
          <button
            type="button"
            class="page-link"
            (click)="pag.setCurrent(page.value)"
          >
            {{ page.label }}
          </button>
        </li>
        <li class="page-item">
          <button
            type="button"
            class="page-link"
            [disabled]="pag.isLastPage()"
            (click)="pag.next()"
          >
            <span class="icon-chevron-right"></span>
          </button>
        </li>
      </ul>
    </nav>
  </pagination-template>

  <table class="table">
    <thead>
      <tr>
        <th>Parlamentar</th>
        <th>Partido/UF</th>
        <th>Sessões</th>
        <th>Presença</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let parlamentar of assiduidade?.parlamentares | paginate: { itemsPerPage: 50, currentPage: p }; index as i;">
        <td>
          {{ parlamentar.assiduidadeParlamentar.nomeEleitoral }}
        </td>
        <td>
          {{ parlamentar.assiduidadeParlamentar.parlamentarPartido.sigla }} /
          {{ parlamentar.assiduidadeParlamentar.uf }}
        </td>
        <td class="text-right">
          {{ parlamentar.totalSessoesDeliberativas }}
        </td>
        <td class="text-right">
          {{ parlamentar.totalPresenca | percent:'1.1' }}
        </td>
      </tr>
    </tbody>
  </table>


  <pagination-template
    #pag="paginationApi"
    maxSize="5"
    (pageChange)="pageChange($event)"
  >
    <nav
      aria-label="Paginação"
      class="pb-1"
    >
      <ul class="pagination justify-content-center">
        <li class="page-item">
          <button
            type="button"
            class="page-link"
            [disabled]="pag.isFirstPage()"
            (click)="pag.previous()"
          >
            <span class="icon-chevron-left"></span>
          </button>
        </li>
        <li
          class="page-item"
          *ngFor="let page of pag.pages"
          [class.active]="pag.getCurrent() === page.value"
        >
          <button
            type="button"
            class="page-link"
            (click)="pag.setCurrent(page.value)"
          >
            {{ page.label }}
          </button>
        </li>
        <li class="page-item">
          <button
            type="button"
            class="page-link"
            [disabled]="pag.isLastPage()"
            (click)="pag.next()"
          >
            <span class="icon-chevron-right"></span>
          </button>
        </li>
      </ul>
    </nav>
  </pagination-template>
</div>
