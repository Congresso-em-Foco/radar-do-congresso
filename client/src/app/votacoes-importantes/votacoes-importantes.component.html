<div class="container">
  <div class="votacoes-importantes">
    <p class="text-center">Encontre a quantidade de votos</p>
    <div class="d-flex justify-content-center">
      <div class="form-group">
        <select
          id="proposicao-selecionada"
          name="proposicao"
          class="form-control"
          [(ngModel)]="proposicaoSelecionada"
        >
          <option
            *ngFor="let proposicao of proposicoes"
            [ngValue]="proposicao"
          >
            {{ proposicao.nome }}
          </option>
        </select>
      </div>
    </div>
  </div>
  <div class="my-4" *ngIf="proposicaoSelecionada">
    <div class="objeto">
      <h3>{{ proposicaoSelecionada?.nome }}</h3>
      <p><strong>Ementa:</strong> {{ proposicaoSelecionada?.ementa }}</p>
    </div>

    <pagination-template
      #pag="paginationApi"
      maxSize="5"
      (pageChange)="pageChange($event)"
    >
      <nav
        aria-label="Paginação"
        class="pb-1"
      >
        <ul class="pagination justify-content-center">
          <li class="page-item">
            <button
              type="button"
              class="page-link"
              [disabled]="pag.isFirstPage()"
              (click)="pag.previous()"
            >
              <span class="icon-chevron-left"></span>
            </button>
          </li>
          <li
            class="page-item"
            *ngFor="let page of pag.pages"
            [class.active]="pag.getCurrent() === page.value"
          >
            <button
              type="button"
              class="page-link"
              (click)="pag.setCurrent(page.value)"
            >
              {{ page.label }}
            </button>
          </li>
          <li class="page-item">
            <button
              type="button"
              class="page-link"
              [disabled]="pag.isLastPage()"
              (click)="pag.next()"
            >
              <span class="icon-chevron-right"></span>
            </button>
          </li>
        </ul>
      </nav>
    </pagination-template>

    <table class="table">
      <thead>
        <tr>
          <th>Parlamentar</th>
          <th>Partido/UF</th>
          <th>Voto</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let voto of proposicaoSelecionada?.proposicaoVotacoes[0].votacoesVoto | paginate: { itemsPerPage: 50, currentPage: p }; index as i;">
          <td>
            {{ voto.votoParlamentar.nomeEleitoral }}
          </td>
          <td>
            {{ voto.votoParlamentar.uf }} /
            {{ voto.votoParlamentar.uf }}
          </td>
          <td class="text-right">
            {{ getTextoVoto(voto.voto, proposicaoSelecionada?.votacaoSecreta) }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
